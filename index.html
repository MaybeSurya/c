<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>MaybeSurya.dev | C & C++ Projects</title>
<meta name="description" content="Minimal, clean project listing." />

<!-- FontAwesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" integrity="sha512-jQq8YbXGq8fYw5Q2rJm6k0QhWv3qj0e7H1Gq9kzV6h5T3b5q2fZpZrYtYk9Q1tK5x8Z0e6q2Y7u9m0l3a4vWQ==" crossorigin="anonymous" referrerpolicy="no-referrer"/>

<style>
:root{
  --bg: #f6f7fb;
  --card: #ffffff;
  --muted:#6b7280;
  --accent:#0071e3;
  --radius:14px;
  --shadow: 0 6px 18px rgba(16,24,40,0.08);
}
*{box-sizing:border-box;margin:0;padding:0;font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;}
body{background:var(--bg);color:#0f172a;min-height:100vh;}
.container{max-width:980px;margin:48px auto;padding:0 20px;}
.header{display:flex;align-items:center;justify-content:space-between;margin-bottom:28px}
.title{font-size:20px;font-weight:600}
.subtitle{color:var(--muted);font-size:13px}

.center-controls{text-align:center;margin-bottom:22px}
.categories{display:inline-flex;gap:12px;padding:8px 12px;border-radius:999px;background:linear-gradient(180deg,rgba(255,255,255,0.9),rgba(250,250,252,0.9));box-shadow:var(--shadow)}
.cat{padding:8px 14px;border-radius:999px;border:none;background:transparent;cursor:pointer;color:var(--muted);font-weight:600}
.cat.active{background:var(--accent);color:white}

.search-wrap{display:flex;justify-content:center;margin-top:16px}
.search{width:100%;max-width:640px;padding:12px 16px;border-radius:999px;border:1px solid #e6e9ef;background:var(--card);box-shadow:0 2px 6px rgba(16,24,40,0.03)}
.search input{width:100%;border:0;outline:0;font-size:14px}

.projects{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:18px;margin-top:28px}
.card{background:var(--card);border-radius:var(--radius);padding:18px;box-shadow:var(--shadow);border:1px solid rgba(16,24,40,0.04)}
.card h3{font-size:15px;margin-bottom:8px}
.meta{display:flex;gap:10px;align-items:center;color:var(--muted);font-size:13px}
.meta .item{display:inline-flex;gap:6px;align-items:center}
.actions{display:flex;gap:8px;margin-top:14px}
.icon-btn{flex:1;padding:10px;border-radius:10px;border:1px solid rgba(16,24,40,0.04);background:transparent;cursor:pointer;color:var(--accent);font-weight:600;display:inline-flex;align-items:center;justify-content:center;gap:8px}
.icon-btn.primary{background:var(--accent);color:white;border:0}
.small{font-size:13px;padding:8px}

/* Modal */
.modal{display:none;position:fixed;inset:0;background:rgba(8,10,15,0.6);backdrop-filter:blur(6px);align-items:center;justify-content:center;padding:18px}
.modal .box{width:100%;max-width:900px;background:white;border-radius:12px;overflow:hidden}
.modal .header{padding:12px 16px;background:#fbfbfd;border-bottom:1px solid #f0f0f3}
.modal .body{padding:16px;max-height:60vh;overflow:auto}
.code{background:#0b1220;color:#e6eef8;padding:12px;border-radius:8px;font-family:monospace;white-space:pre;}
.copy-icon{cursor:pointer;color:var(--accent);font-size:18px}

.footer{margin-top:40px;text-align:center;color:var(--muted);font-size:13px;padding:34px 0}
.footer a{color:var(--muted);margin:0 8px;text-decoration:none}

@media(max-width:560px){.categories{gap:8px;padding:6px}}
</style>
</head>
<body>

<div class="container">
  <div class="header">
    <div>
      <div class="title">MaybeSurya.dev</div>
      <div class="subtitle">C & C++ small projects • Clean showcase</div>
    </div>
    <div style="display:flex;gap:10px;align-items:center">
      <a href="https://github.com/MaybeSurya" target="_blank" aria-label="GitHub"><i class="fa-brands fa-github fa-lg"></i></a>
      <a href="https://linkedin.com/in/MaybeSurya" target="_blank" aria-label="LinkedIn"><i class="fa-brands fa-linkedin fa-lg"></i></a>
      <a href="https://MaybeSurya.dev" target="_blank" aria-label="Website"><i class="fa-solid fa-globe fa-lg"></i></a>
    </div>
  </div>

  <div class="center-controls">
    <div class="categories" id="categories">
      <button class="cat active" onclick="selectCategory('all')">All</button>
      <button class="cat" onclick="selectCategory('c')">C</button>
      <button class="cat" onclick="selectCategory('cpp')">C++</button>
    </div>

    <div class="search-wrap">
      <div class="search">
        <input id="search" placeholder="Search projects by name..." oninput="onSearch()" />
      </div>
    </div>
  </div>

  <div class="projects" id="projects" aria-live="polite"></div>

  <div style="height:30px" id="loadTrigger"></div>

  <div class="footer">
    <div>© 2026 MaybeSurya</div>
  </div>
</div>

<!-- Modal -->
<div class="modal" id="modal">
  <div class="box">
    <div class="header" style="display:flex;justify-content:space-between;align-items:center">
      <div id="modalTitle" style="font-weight:600"></div>
      <div style="display:flex;gap:12px;align-items:center">
        <i class="fa-regular fa-copy copy-icon" id="copyIcon" title="Copy code" onclick="copyCode()"></i>
        <i class="fa-solid fa-xmark" style="cursor:pointer" onclick="closeModal()"></i>
      </div>
    </div>
    <div class="body">
      <pre class="code" id="codeBlock">Loading...</pre>
    </div>
  </div>
</div>

<script>
const repo = 'MaybeSurya/c';
let allFiles = [];
let visible = [];
let current = 0;
const batch = 8;
let selectedCategory = 'all';

async function fetchProjects(){
  showSkeletons();
  const repoRes = await fetch(`https://api.github.com/repos/${repo}`);
  const repoStats = await repoRes.json();
  const res = await fetch(`https://api.github.com/repos/${repo}/contents`);
  const files = await res.json();

  allFiles = files.filter(f=>f.name.endsWith('.c')||f.name.endsWith('.cpp')).map(f=>({
    name:f.name, path:f.path, download_url:f.download_url, lang: f.name.endsWith('.c')?'c':'cpp', repoStats
  }));

  clearSkeletons();
  loadMore();
  observeScroll();
}

function showSkeletons(){
  const c = document.getElementById('projects');
  c.innerHTML = '';
  for(let i=0;i<6;i++) c.innerHTML += `<div class="card" style="height:110px;background:linear-gradient(180deg,#fff,#fbfbfd);opacity:0.9"></div>`;
}
function clearSkeletons(){ document.getElementById('projects').innerHTML=''; }

function loadMore(){
  const next = allFiles.slice(current, current+batch).filter(f=>filterByCategory(f));
  visible = [...visible, ...next];
  current += batch;
  render(visible);
}

function filterByCategory(f){
  if(selectedCategory==='all') return true;
  return f.lang === selectedCategory;
}

function observeScroll(){
  const obs = new IntersectionObserver(entries=>{
    if(entries[0].isIntersecting) loadMore();
  },{threshold:1});
  const el = document.getElementById('loadTrigger');
  if(el) obs.observe(el);
}

function render(list){
  const c = document.getElementById('projects');
  c.innerHTML='';
  list.forEach(async (p)=>{
    // fetch last commit for this file to get accurate updated date
    let updated='—';
    try{
      const commits = await fetch(`https://api.github.com/repos/${repo}/commits?path=${encodeURIComponent(p.path)}&per_page=1`);
      const data = await commits.json();
      if(Array.isArray(data)&&data.length>0) updated = new Date(data[0].commit.author.date).toLocaleDateString();
    }catch(e){ /* ignore */ }

    const html = `
      <div class="card">
        <h3>${p.name}</h3>
        <div class="meta">
          <div class="item"><i class="fa-solid fa-star"></i> ${p.repoStats?.stargazers_count ?? '0'}</div>
          <div class="item"><i class="fa-solid fa-code-branch"></i> ${p.repoStats?.forks_count ?? '0'}</div>
          <div class="item">Updated: ${updated}</div>
        </div>
        <div class="actions">
          <button class="icon-btn primary" onclick="preview('${p.download_url}','${p.lang}','${p.name}')"><i class="fa-regular fa-eye"></i> Preview</button>
          <a class="icon-btn" href="${p.download_url}" download><i class="fa-solid fa-download"></i> Download</a>
        </div>
      </div>`;

    c.insertAdjacentHTML('beforeend', html);
  });
}

function selectCategory(cat){
  selectedCategory = cat;
  document.querySelectorAll('.cat').forEach(b=>b.classList.remove('active'));
  document.querySelectorAll('.cat').forEach(b=>{ if(b.textContent.toLowerCase()===(cat==='cpp'?'c++':cat)) b.classList.add('active'); });
  // reset view
  visible = [];
  current = 0;
  render(visible);
  loadMore();
}

function onSearch(){
  const q = document.getElementById('search').value.toLowerCase();
  const filtered = allFiles.filter(f=>f.name.toLowerCase().includes(q) && filterByCategory(f));
  visible = filtered;
  render(visible);
}

async function preview(url,lang,name){
  const res = await fetch(url);
  const txt = await res.text();
  document.getElementById('modalTitle').textContent = name;
  const block = document.getElementById('codeBlock');
  block.textContent = txt;
  document.getElementById('modal').style.display='flex';
}
function closeModal(){ document.getElementById('modal').style.display='none'; }
function copyCode(){
  const txt = document.getElementById('codeBlock').textContent;
  navigator.clipboard.writeText(txt);
  const ico = document.getElementById('copyIcon');
  ico.classList.add('fa-beat');
  setTimeout(()=>ico.classList.remove('fa-beat'),800);
}
fetchProjects();
</script>

</body>
</html>
